/*! CPAN Distributions List - v0.1.0 - 2013-06-23
* https://github.com/guillaumeaubert/jquery-cpan-distributions-list
* Copyright (c) 2013 Guillaume Aubert; Licensed GPLv3 */
!function(a){a.fn.createDistributionsList=function(b){function c(b,c,f,g){var h=e.repositories[c]?e.repositories[c]:e.repository_lowercase?c.toLowerCase():c,i={distribution:c,version:f,date:g,travis_status_badge:e.travis_ci?a("<a>").attr("href","https://travis-ci.org/"+e.github_id+"/"+h).html(a("<img>").attr("src","https://travis-ci.org/"+e.github_id+"/"+h+".png?branch=master").attr("alt","Build Status")):"",coveralls_badge:e.coveralls?a("<a>").attr("href","https://coveralls.io/r/"+e.github_id+"/"+h+"?branch=master").html(a("<img>").attr("src","https://coveralls.io/repos/"+e.github_id+"/"+h+"/badge.png?branch=master").attr("alt","Coverage Status")):"",github:a("<a>").attr("href","https://github.com/"+e.github_id+"/"+h).html("GitHub"),metacpan:a("<a>").attr("href","https://metacpan.org/release/"+c).html("MetaCPAN"),cpants:a("<a>").attr("href","http://cpants.cpanauthors.org/dist/"+c).html("CPANTS")},j=e.template_row.clone();for(var k in i)j.find("."+k).html(i[k]);j.css("display",""),j.attr("id","row_"+b),j.addClass("distribution"),j.removeClass("template"),d.find("tbody:last").append(j)}var d=this,e=a.extend({pause_id:"AUBERTG",github_id:"guillaumeaubert",coveralls:!0,travis_ci:!0,repositories:{},repository_lowercase:!1,template_row:this.find("tr.template:first")},b);a.ajax({type:"GET",async:!0,dataType:"json",url:"http://api.metacpan.org/v0/release/_search?q=author:"+e.pause_id+"%20AND%20status:latest&fields=version,distribution,date&size=100&sort=distribution",success:function(a){return"false"===a.timed_out?(alert("MetaCPAN timed out ("+a.timed_out+")!"),void 0):0===a.hits.total?(alert("MetaCPAN returned no distributions for this author!"),void 0):(a.hits.hits.forEach(function(a,b){c(b,a.fields.distribution,a.fields.version,a.fields.date)}),e.on_success&&e.on_success(a),void 0)},error:function(a){alert("Error: "+a.statusText)}})}}(jQuery);